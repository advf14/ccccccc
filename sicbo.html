<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>B52 VIP - SICBO CASINO</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <script src="api.js"></script>

    <style>
        /* CORE */
        :root { --neon-gold: #ffd700; --neon-blue: #00f2ff; --neon-red: #ff004c; --bg-dark: #050505; }
        * { box-sizing: border-box; user-select: none; font-family: 'Rajdhani', sans-serif; margin: 0; padding: 0; }
        
        @media screen and (orientation: portrait) and (max-width: 900px) {
            body {
                transform: rotate(90deg); transform-origin: bottom left;
                position: absolute; top: -100vw; left: 0; height: 100vw; width: 100vh;
                overflow: hidden; background-size: 100vh 100vw;
            }
            .modal-overlay { width: 100vh !important; height: 100vw !important; }
        }

        body { 
            background-color: var(--bg-dark); 
            background-image: radial-gradient(circle at 50% 50%, #112 0%, #000 90%); /* Nền xanh đen Casino */
            height: 100vh; overflow: hidden; color: #fff; touch-action: none; 
        }

        /* TOP BAR */
        .top-bar { 
            position: absolute; top: 0; width: 100%; height: 50px; padding: 0 15px; 
            display: flex; justify-content: space-between; align-items: center; 
            background: rgba(0,0,0,0.8); border-bottom: 1px solid #333; z-index: 100;
        }
        .user-badge { display: flex; align-items: center; gap: 10px; font-weight: bold; color: gold; }
        .balance-plate { background: #000; padding: 2px 10px; border: 1px solid gold; border-radius: 15px; font-family: 'Orbitron'; }
        .header-btns .btn { background: #222; border: 1px solid #444; padding: 5px 10px; color: #ccc; cursor: pointer; border-radius: 5px; margin-left: 5px; }

        /* HŨ HỘP QUÀ */
        .jackpot-box {
            position: absolute; top: 60px; left: 50%; transform: translateX(-50%);
            z-index: 80; text-align: center;
        }
        .jp-icon { font-size: 2.5rem; color: #ff3333; filter: drop-shadow(0 0 10px gold); animation: float 2s infinite ease-in-out; }
        .jp-val { font-family: 'Orbitron'; font-weight: 900; font-size: 1.8rem; color: gold; text-shadow: 0 0 10px orange; margin-top: -5px; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

        /* LAYOUT CHÍNH */
        .game-wrapper {
            position: absolute; top: 60px; bottom: 70px; width: 100%; 
            display: flex; gap: 10px; padding: 10px; justify-content: center; align-items: center;
        }

        /* 1. KHU VỰC LẮC (BÊN TRÁI) */
        .shaker-container {
            width: 280px; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.3); border-radius: 10px; border: 1px solid #333; position: relative;
        }
        .plate-box { position: relative; width: 220px; height: 220px; display: flex; justify-content: center; align-items: center; }
        .plate { 
            width: 200px; height: 200px; background: radial-gradient(#333, #000); 
            border-radius: 50%; border: 5px solid gold; display: flex; justify-content: center; align-items: center; 
        }
        .dice-wrap { display: flex; gap: 5px; }
        
        /* BÁT (LID) - FIX CĂN GIỮA & ANIMATION */
        .lid { 
            width: 220px; height: 220px; 
            background: radial-gradient(circle at 30% 30%, #a00, #300); 
            border-radius: 50%; position: absolute; border: 4px solid #f00; 
            z-index: 50; display: flex; justify-content: center; align-items: center; 
            box-shadow: inset 0 0 30px rgba(0,0,0,0.8), 0 20px 40px #000; 
            top: 50%; left: 50%; transform: translate(-50%, -50%); /* Căn giữa */
            transition: transform 0.5s ease-out, opacity 0.5s; cursor: pointer;
        }
        .lid::after { content: 'SICBO'; font-family: 'Orbitron'; font-weight: 900; font-size: 3rem; color: rgba(255,255,255,0.15); pointer-events: none; }
        .lid.open { transform: translate(-50%, -300px); opacity: 0; pointer-events: none; } /* Bay thẳng lên */

        .timer { font-family: 'Orbitron'; font-size: 2.5rem; color: gold; margin-top: 10px; text-shadow: 0 0 10px gold; }
        .msg { font-family: 'Orbitron'; font-size: 1.2rem; color: lime; min-height: 30px; margin-top: 5px; opacity: 0; }

        /* 2. BÀN CƯỢC (GRID SYSTEM CHUẨN CASINO) */
        .board {
            flex: 1; display: grid; 
            grid-template-columns: repeat(17, 1fr); /* 17 cột cho dãy tổng 4-17 */
            grid-template-rows: repeat(4, 1fr); 
            gap: 3px; max-width: 950px; background: #0a0a0a; padding: 5px; border: 2px solid #444; border-radius: 10px;
        }

        .cell {
            background: linear-gradient(to bottom, #1a1a1a, #000); border: 1px solid #333; border-radius: 4px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; position: relative; transition: 0.1s; color: #ddd; font-size: 0.8rem;
        }
        .cell:active { transform: scale(0.95); border-color: gold; }
        .cell.win { background: rgba(0, 255, 0, 0.3); border-color: #0f0; box-shadow: 0 0 10px #0f0; z-index: 10; }
        .cell small { font-size: 0.65rem; color: #888; }

        /* --- LAYOUT BÀN CƯỢC --- */
        /* Hàng 1: Tài, Xỉu, Chẵn, Lẻ */
        .c-xiu { grid-column: 1 / 4; grid-row: 1 / 2; background: linear-gradient(to right, #002, #005); font-size: 1.5rem; font-weight: bold; color: cyan; font-family: 'Orbitron'; }
        .c-tai { grid-column: 15 / 18; grid-row: 1 / 2; background: linear-gradient(to right, #400, #200); font-size: 1.5rem; font-weight: bold; color: red; font-family: 'Orbitron'; }
        .c-chan { grid-column: 4 / 7; grid-row: 1 / 2; color: #aaa; font-weight: bold; }
        .c-le   { grid-column: 12 / 15; grid-row: 1 / 2; color: #aaa; font-weight: bold; }
        .c-any3 { grid-column: 7 / 12; grid-row: 1 / 2; color: gold; font-weight: bold; border-color: gold; } /* Bão bất kỳ */

        /* Hàng 2: Cược Số (1-6) */
        .c-d1 { grid-column: 1 / 4; grid-row: 2 / 3; font-size: 1.5rem; }
        .c-d2 { grid-column: 4 / 7; grid-row: 2 / 3; font-size: 1.5rem; }
        .c-d3 { grid-column: 7 / 10; grid-row: 2 / 3; font-size: 1.5rem; }
        .c-d4 { grid-column: 10 / 13; grid-row: 2 / 3; font-size: 1.5rem; }
        .c-d5 { grid-column: 13 / 16; grid-row: 2 / 3; font-size: 1.5rem; }
        .c-d6 { grid-column: 16 / 18; grid-row: 2 / 3; font-size: 1.5rem; } /* Chiếm 2 cột cuối */

        /* Hàng 3: Cược Tổng (4-17) */
        .c-total { grid-row: 3 / 4; display: flex; flex-direction: column; } /* Sẽ dùng JS render class riêng */
        
        /* Hàng 4: Cược Đôi & Bão Cụ Thể */
        /* Ta gộp chung vào hàng cuối cho gọn */
        .c-pair { grid-row: 4 / 5; font-size: 0.8rem; }

        /* DICE CSS */
        .dice { width: 40px; height: 40px; background: #fff; border-radius: 6px; display: grid; grid-template-columns: repeat(3, 1fr); padding: 2px; box-shadow: inset 0 0 5px #000; }
        .dot { background: #000; border-radius: 50%; visibility: hidden; }
        .d1 .dot:nth-child(5) { visibility: visible; background: red; width: 10px; height: 10px; margin: 9px; }
        .d2 .dot:nth-child(1), .d2 .dot:nth-child(9) { visibility: visible; }
        .d3 .dot:nth-child(1), .d3 .dot:nth-child(5), .d3 .dot:nth-child(9) { visibility: visible; }
        .d4 .dot:nth-child(1), .d4 .dot:nth-child(3), .d4 .dot:nth-child(7), .d4 .dot:nth-child(9) { visibility: visible; background: red; }
        .d5 .dot:nth-child(1), .d5 .dot:nth-child(3), .d5 .dot:nth-child(5), .d5 .dot:nth-child(7), .d5 .dot:nth-child(9) { visibility: visible; }
        .d6 .dot:nth-child(1), .d6 .dot:nth-child(3), .d6 .dot:nth-child(4), .d6 .dot:nth-child(6), .d6 .dot:nth-child(7), .d6 .dot:nth-child(9) { visibility: visible; }

        /* CHIP */
        .my-chip { position: absolute; top: 2px; right: 2px; background: gold; width: 16px; height: 16px; border-radius: 50%; color: #000; font-size: 8px; font-weight: bold; display: flex; justify-content: center; align-items: center; border: 1px solid #fff; z-index: 5; }

        /* FOOTER */
        .controls { position: fixed; bottom: 0; width: 100%; background: #111; padding: 10px; display: flex; justify-content: center; gap: 10px; border-top: 1px solid #444; z-index: 100; overflow-x: auto; }
        .chip-btn { min-width: 50px; height: 50px; border-radius: 50%; background: #333; border: 2px dashed #fff; color: #fff; font-weight: bold; font-size: 0.7rem; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        .chip-btn.active { border-color: gold; border-style: solid; transform: translateY(-5px); box-shadow: 0 0 10px gold; }
        .chip-btn[data-val="1000000"] { background: purple; } .chip-btn[data-val="5000000"] { background: orange; color: #000; }

        /* MODAL FIX */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 200; display: none; justify-content: center; align-items: center; }
        .modal-box { background: #151515; border: 1px solid gold; width: 700px; max-width: 90%; max-height: 80vh; display: flex; flex-direction: column; border-radius: 10px; }
        .modal-header { padding: 15px 20px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; color: gold; font-weight: bold; font-family: 'Orbitron'; font-size: 1.2rem; }
        .close-btn { cursor: pointer; font-size: 2rem; color: #fff; line-height: 1; }
        .table-container { overflow-y: auto; padding: 10px; flex: 1; }
        table { width: 100%; color: #ccc; border-collapse: collapse; } th, td { padding: 8px; border-bottom: 1px solid #333; text-align: center; } .text-win { color: lime; }

        @keyframes shake { 0% { transform: translate(-50%, -50%) rotate(0deg); } 25% { transform: translate(-52%, -48%) rotate(-5deg); } 75% { transform: translate(-48%, -52%) rotate(5deg); } 100% { transform: translate(-50%, -50%) rotate(0deg); } }
        .shaking { animation: shake 0.5s infinite; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="user-badge">
            <i class="fas fa-user-astronaut"></i> <span id="user-name">...</span>
            <span style="color:gold; margin-left:10px">$ <span id="balance">0</span></span>
        </div>
        <div class="header-btns">
            <span class="btn" onclick="openHistory()">Lịch Sử</span>
            <span class="btn" style="border-color:#f55; color:#f55" onclick="window.location.href='index.html'">Thoát</span>
        </div>
    </div>

    <div class="game-wrapper">
        <div class="jackpot-box">
            <div class="jp-icon"><i class="fas fa-gift"></i></div>
            <div class="jp-val" id="jackpot-val">5,000,000</div>
        </div>

        <div class="shaker-container">
            <div class="plate-box">
                <div class="plate">
                    <div class="dice-wrap">
                        <div class="dice d1"><div class="dot"></div></div>
                        <div class="dice d2"><div class="dot"></div></div>
                        <div class="dice d3"><div class="dot"></div></div>
                    </div>
                </div>
                <div class="lid locked" id="lid" onclick="manualReveal()"></div>
            </div>
            <div class="timer" id="timer">00:00</div>
            <div id="result-msg"></div>
        </div>

        <div class="board">
            <div class="cell c-xiu" onclick="placeBet('xiu')">XỈU<small>4-10</small></div>
            <div class="cell c-chan" onclick="placeBet('chan')">CHẴN<small>1:1</small></div>
            <div class="cell c-any3" onclick="placeBet('any3')">BÃO BẤT KỲ<small>1:30</small></div>
            <div class="cell c-le" onclick="placeBet('le')">LẺ<small>1:1</small></div>
            <div class="cell c-tai" onclick="placeBet('tai')">TÀI<small>11-17</small></div>

            <div class="cell c-d1" onclick="placeBet('s1')"><i class="fas fa-dice-one"></i></div>
            <div class="cell c-d2" onclick="placeBet('s2')"><i class="fas fa-dice-two"></i></div>
            <div class="cell c-d3" onclick="placeBet('s3')"><i class="fas fa-dice-three"></i></div>
            <div class="cell c-d4" onclick="placeBet('s4')"><i class="fas fa-dice-four"></i></div>
            <div class="cell c-d5" onclick="placeBet('s5')"><i class="fas fa-dice-five"></i></div>
            <div class="cell c-d6" onclick="placeBet('s6')"><i class="fas fa-dice-six"></i></div>

            <div class="cell c-total" style="grid-column: 2/3" onclick="placeBet('t4')">4<small>1:60</small></div>
            <div class="cell c-total" style="grid-column: 3/4" onclick="placeBet('t5')">5<small>1:30</small></div>
            <div class="cell c-total" style="grid-column: 4/5" onclick="placeBet('t6')">6<small>1:18</small></div>
            <div class="cell c-total" style="grid-column: 5/6" onclick="placeBet('t7')">7<small>1:12</small></div>
            <div class="cell c-total" style="grid-column: 6/7" onclick="placeBet('t8')">8<small>1:8</small></div>
            <div class="cell c-total" style="grid-column: 7/8" onclick="placeBet('t9')">9<small>1:6</small></div>
            <div class="cell c-total" style="grid-column: 8/10" onclick="placeBet('t10')">10<small>1:6</small></div>
            <div class="cell c-total" style="grid-column: 10/12" onclick="placeBet('t11')">11<small>1:6</small></div>
            <div class="cell c-total" style="grid-column: 12/13" onclick="placeBet('t12')">12<small>1:6</small></div>
            <div class="cell c-total" style="grid-column: 13/14" onclick="placeBet('t13')">13<small>1:8</small></div>
            <div class="cell c-total" style="grid-column: 14/15" onclick="placeBet('t14')">14<small>1:12</small></div>
            <div class="cell c-total" style="grid-column: 15/16" onclick="placeBet('t15')">15<small>1:18</small></div>
            <div class="cell c-total" style="grid-column: 16/17" onclick="placeBet('t16')">16<small>1:30</small></div>
            <div class="cell c-total" style="grid-column: 17/18" onclick="placeBet('t17')">17<small>1:60</small></div>

            <div class="cell c-pair" style="grid-column: 2/4" onclick="placeBet('d11')">1-1<small>1:10</small></div>
            <div class="cell c-pair" style="grid-column: 4/6" onclick="placeBet('d22')">2-2<small>1:10</small></div>
            <div class="cell c-pair" style="grid-column: 6/8" onclick="placeBet('d33')">3-3<small>1:10</small></div>
            <div class="cell c-pair" style="grid-column: 8/10" onclick="placeBet('d44')">4-4<small>1:10</small></div>
            <div class="cell c-pair" style="grid-column: 10/12" onclick="placeBet('d55')">5-5<small>1:10</small></div>
            <div class="cell c-pair" style="grid-column: 12/14" onclick="placeBet('d66')">6-6<small>1:10</small></div>
            <div class="cell c-pair" style="grid-column: 14/16" onclick="placeBet('t666')">666<small>1:180</small></div> </div>
    </div>

    <div class="controls">
        <div class="chip-btn" data-val="1000" onclick="setChip(1000, this)">1K</div>
        <div class="chip-btn" data-val="10000" onclick="setChip(10000, this)">10K</div>
        <div class="chip-btn" data-val="100000" onclick="setChip(100000, this)">100K</div>
        <div class="chip-btn active" data-val="1000000" onclick="setChip(1000000, this)">1M</div>
        <div class="chip-btn" data-val="5000000" onclick="setChip(5000000, this)">5M</div>
    </div>

    <div class="modal-overlay" id="historyModal">
        <div class="modal-box">
            <div class="modal-header">
                <span>LỊCH SỬ SICBO</span>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            <div class="table-container">
                <table id="his-table"><thead><tr><th>Phiên</th><th>Thắng/Thua</th></tr></thead><tbody></tbody></table>
            </div>
        </div>
    </div>

    <script>
        const SESSION_KEY = 'b52_current_session';
        const ROUND_TIME = 60; const BET_TIME = 45; 
        
        let currentUser = null, globalData = null;
        let state = { chip: 1000000, bets: {}, phase: 'BETTING', roundId: 0, lidOpen: false };
        
        const el = id => document.getElementById(id);
        const fmt = n => n.toLocaleString();

        async function init() {
            let u = localStorage.getItem(SESSION_KEY);
            if(!u) { alert("Vui lòng đăng nhập!"); window.location.href='index.html'; return; }
            globalData = await getGlobalData();
            currentUser = globalData.users.find(x => x.username === u);
            if(currentUser) {
                el('user-name').innerText = currentUser.username;
                updateBal();
                setInterval(loop, 1000); 
                setInterval(syncData, 3000); 
            }
        }

        // TIME LOOP (ĐỒNG BỘ 100% VỚI TÀI XỈU)
        function loop() {
            let now = Math.floor(Date.now() / 1000);
            let curRound = Math.floor(now / ROUND_TIME);
            let sec = now % ROUND_TIME;
            let timeLeft = ROUND_TIME - sec;

            if(curRound !== state.roundId) resetRound(curRound);

            if(sec < BET_TIME) {
                state.phase = 'BETTING'; el('timer').innerText = `Cược: ${BET_TIME - sec}`; el('timer').style.color = 'gold';
            } else {
                state.phase = 'OPENING'; el('timer').innerText = `Mở: ${timeLeft}`; el('timer').style.color = 'red';
                // Mở tự động khi còn 3s để kịp đồng bộ
                if(!state.lidOpen && timeLeft <= 3) reveal();
            }
        }

        function resetRound(id) {
            state.roundId = id; state.bets = {}; state.lidOpen = false;
            // Reset Bát về giữa
            el('lid').classList.remove('open', 'locked'); 
            el('lid').style.transform = 'translate(-50%, -50%)'; // Reset vị trí
            el('lid').style.opacity = '1';
            el('lid').classList.add('shaking'); setTimeout(()=>el('lid').classList.remove('shaking'), 800);
            
            document.querySelectorAll('.cell').forEach(b => {
                b.classList.remove('win', 'selected');
                let chip = b.querySelector('.my-chip'); if(chip) chip.remove();
            });
            el('result-msg').style.opacity = '0';
        }

        // BETTING
        function setChip(v, btn) { state.chip = v; document.querySelectorAll('.chip-btn').forEach(b=>b.classList.remove('active')); btn.classList.add('active'); }
        function updateBal() { el('balance').innerText = fmt(currentUser.balance); }

        async function placeBet(spot) {
            if(state.phase !== 'BETTING') return;
            if(currentUser.balance < state.chip) return alert("Hết tiền!");
            currentUser.balance -= state.chip; updateBal();
            if(!state.bets[spot]) state.bets[spot] = 0; state.bets[spot] += state.chip;
            renderChip(spot, state.bets[spot]);
            sendBet(spot, state.chip);
        }
        async function sendBet(spot, amt) {
            let latest = await getGlobalData();
            let idx = latest.users.findIndex(u=>u.username===currentUser.username);
            latest.users[idx].balance -= amt; await saveGlobalData(latest);
        }
        function renderChip(spot, amount) {
            let box = document.querySelector(`[onclick="placeBet('${spot}')"]`);
            if(box) {
                let old = box.querySelector('.my-chip'); if(old) old.remove();
                let c = document.createElement('div'); c.className='my-chip';
                c.innerText = amount >= 1000000 ? (amount/1000000)+'M' : (amount/1000)+'K';
                box.appendChild(c); box.classList.add('selected');
            }
        }

        // RESULT
        async function reveal() {
            if(state.lidOpen) return;
            state.lidOpen = true;
            el('lid').classList.add('open'); // Bay lên

            let seed = state.roundId * 12345;
            const r = () => { seed = (seed * 9301 + 49297) % 233280; return Math.ceil(seed / 233280 * 6); };
            
            let latest = await getGlobalData();
            let d1=r(), d2=r(), d3=r();
            
            if(latest && latest.adminCommand && latest.adminCommand.d1 > 0) {
                d1=latest.adminCommand.d1; d2=latest.adminCommand.d2; d3=latest.adminCommand.d3;
            }

            // Render Dice
            const ds = document.querySelectorAll('.dice');
            [d1,d2,d3].forEach((v,i) => {
                ds[i].className = `dice d${v}`;
                ds[i].innerHTML = ''; for(let k=0;k<9;k++) ds[i].appendChild(document.createElement('div')).className='dot';
            });

            // Calc Win
            let sum = d1+d2+d3;
            let winSpots = [];
            let isTriple = (d1==d2 && d2==d3);

            if(!isTriple) {
                if(sum>=11 && sum<=17) winSpots.push('tai');
                if(sum>=4 && sum<=10) winSpots.push('xiu');
            }
            if(sum%2==0) winSpots.push('chan'); else winSpots.push('le');
            
            winSpots.push('t'+sum);
            [d1,d2,d3].forEach(d => winSpots.push('s'+d));
            if(d1==d2) winSpots.push('d'+d1+d1); if(d2==d3) winSpots.push('d'+d2+d2); if(d1==d3) winSpots.push('d'+d1+d1);
            if(isTriple) { winSpots.push('any3'); winSpots.push('t'+d1+d1+d1); }

            let totalWin = 0;
            winSpots.forEach(spot => {
                let box = document.querySelector(`[onclick="placeBet('${spot}')"]`);
                if(box) box.classList.add('win');

                if(state.bets[spot]) {
                    let odds = 1;
                    if(spot.startsWith('t')) odds = 10; 
                    if(spot.startsWith('d') && spot.length==3) odds = 10; 
                    if(spot === 'any3') odds = 30;
                    if(spot.startsWith('s')) {
                        let count = 0; let num = parseInt(spot.replace('s',''));
                        if(d1==num) count++; if(d2==num) count++; if(d3==num) count++;
                        odds = count; 
                    }
                    totalWin += state.bets[spot] * (1 + odds);
                }
            });

            if(totalWin > 0) {
                el('result-msg').innerText = `THẮNG: ${fmt(totalWin)}`;
                el('result-msg').style.opacity = '1';
                let idx = latest.users.findIndex(u=>u.username===currentUser.username);
                latest.users[idx].balance += totalWin;
                if(!latest.users[idx].sicboHistory) latest.users[idx].sicboHistory = [];
                latest.users[idx].sicboHistory.push({round: state.roundId, win: totalWin});
                
                await saveGlobalData(latest);
                currentUser.balance += totalWin;
                updateBal();
            } else {
                el('result-msg').innerText = 'THUA RỒI!'; el('result-msg').style.color = 'red'; el('result-msg').style.opacity = '1';
            }
        }

        function manualReveal() { if(state.phase === 'OPENING' && !state.lidOpen) reveal(); }
        async function syncData() { if(state.phase==='BETTING') { let d = await getGlobalData(); if(d) { globalData = d; if(d.jackpot) el('jackpot-val').innerText = fmt(parseInt(d.jackpot)); let me = d.users.find(u=>u.username===currentUser.username); if(me && me.balance !== currentUser.balance) { currentUser.balance = me.balance; updateBal(); } } } }
        function openHistory() { el('historyModal').style.display='flex'; renderHistory(); }
        function closeModal() { el('historyModal').style.display='none'; }
        function renderHistory() { const tb = document.querySelector('#his-table tbody'); tb.innerHTML = ''; if(currentUser.sicboHistory) { currentUser.sicboHistory.slice().reverse().slice(0,10).forEach(h => { tb.innerHTML += `<tr><td>#${h.round}</td><td class="text-win">+${fmt(h.win)}</td></tr>`; }); } else tb.innerHTML = '<tr><td colspan="2">Chưa có dữ liệu</td></tr>'; }

        init();
    </script>
</body>
</html>