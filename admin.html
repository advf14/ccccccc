<!DOCTYPE html><html lang="vi"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Admin Dashboard - Global Sync</title>    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">        <script src="api.js"></script>    <style>        body { background-color: #0f111a; color: #a0a0a0; font-family: 'Segoe UI', sans-serif; padding-bottom: 50px; }                /* CARD STYLES */        .card-custom { background-color: #1b1e2b; border: 1px solid #333; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }        .card-header { background: transparent; border-bottom: 1px solid #333; font-weight: bold; text-transform: uppercase; padding: 15px; }        .text-neon-gold { color: #ffd700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }        .text-neon-blue { color: #00f2ff; text-shadow: 0 0 10px rgba(0, 242, 255, 0.3); }        .text-neon-red { color: #ff004c; text-shadow: 0 0 10px rgba(255, 0, 76, 0.3); }        /* INPUT STYLES */        .form-control-dark { background-color: #0f111a; border: 1px solid #444; color: #fff; }        .form-control-dark:focus { background-color: #000; color: #fff; border-color: #ffd700; box-shadow: none; }        /* GRAPH STYLES (Gi?ng h?t bên Game) */        .graph-wrapper { background: #151515; border-radius: 10px; padding: 10px; overflow: hidden; border: 1px solid #333; }        .dot-tai circle { fill: #000; stroke: #fff; stroke-width: 2px; }        .dot-tai text { fill: #fff; font-size: 10px; font-weight: bold; }        .dot-xiu circle { fill: #fff; stroke: #000; stroke-width: 2px; }        .dot-xiu text { fill: #000; font-size: 10px; font-weight: bold; }        /* LIST STYLES */        .bet-list { list-style: none; padding: 0; max-height: 250px; overflow-y: auto; }        .bet-list li { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #2d3246; }        .bet-list li:last-child { border-bottom: none; }        .user-name { font-weight: bold; color: #fff; }        .money-val { color: #ffd700; font-family: monospace; font-size: 1.1em; }    </style></head><body class="container py-4">    <div class="d-flex justify-content-between align-items-center mb-4">        <h2 class="text-neon-gold m-0"><i class="fas fa-user-secret"></i> ADMIN GLOBAL</h2>        <div class="badge bg-dark border border-success text-success p-2">            <i class="fas fa-wifi"></i> <span id="status">Ðang k?t n?i...</span>        </div>    </div>    <div class="row">        <div class="col-12">            <div class="card card-custom">                <div class="card-header text-neon-gold">                    <i class="fas fa-chart-line"></i> BI?U Ð? SOI C?U (Ð?NG B? REALTIME V?I USER)                </div>                <div class="card-body">                    <div class="graph-wrapper" id="graph-container">                        <div class="text-center p-5 text-secondary">Ðang t?i d? li?u c?u...</div>                    </div>                </div>            </div>        </div>    </div>    <div class="row">        <div class="col-md-6">            <div class="card card-custom h-100">                <div class="card-header text-neon-red">                    <i class="fas fa-dice"></i> CÀI Ð?T K?T QU? (B? C?U)                </div>                <div class="card-body">                    <div class="alert alert-dark text-center border-secondary mb-3">                        L?nh hi?n t?i: <strong id="current-cmd" class="text-white">...</strong>                    </div>                    <div class="d-flex gap-2 mb-3">                        <input type="number" id="d1" class="form-control form-control-dark text-center fw-bold fs-4" value="6" min="1" max="6">                        <input type="number" id="d2" class="form-control form-control-dark text-center fw-bold fs-4" value="6" min="1" max="6">                        <input type="number" id="d3" class="form-control form-control-dark text-center fw-bold fs-4" value="6" min="1" max="6">                    </div>                    <button onclick="setDice()" class="btn btn-danger w-100 fw-bold py-2">                        <i class="fas fa-bolt"></i> G?I L?NH ADMIN                    </button>                    <p class="text-secondary text-center mt-2 small">* K?t qu? s? áp d?ng cho ván k? ti?p</p>                </div>            </div>        </div>        <div class="col-md-6">            <div class="card card-custom h-100">                <div class="card-header text-neon-blue">                    <i class="fas fa-wallet"></i> QU?N LÝ TI?N USER                </div>                <div class="card-body">                    <div class="mb-3">                        <label class="small text-secondary">Tên tài kho?n:</label>                        <input type="text" id="adm-user" class="form-control form-control-dark" placeholder="Nh?p username...">                    </div>                    <div class="mb-3">                        <label class="small text-secondary">S? ti?n c?ng:</label>                        <input type="number" id="adm-amt" class="form-control form-control-dark" placeholder="VD: 5000000">                    </div>                    <button onclick="addMoney()" class="btn btn-success w-100 fw-bold py-2">                        <i class="fas fa-check-circle"></i> C?NG TI?N NGAY                    </button>                </div>            </div>        </div>    </div>    <div class="row mt-3">        <div class="col-md-6">            <div class="card card-custom">                <div class="card-header text-center text-info border-info">                    BÊN TÀI (<span id="total-tai">0</span>)                </div>                <div class="card-body p-0">                    <ul class="bet-list" id="list-tai"></ul>                </div>            </div>        </div>        <div class="col-md-6">            <div class="card card-custom">                <div class="card-header text-center text-danger border-danger">                    BÊN X?U (<span id="total-xiu">0</span>)                </div>                <div class="card-body p-0">                    <ul class="bet-list" id="list-xiu"></ul>                </div>            </div>        </div>    </div>    <div class="card card-custom mt-3">        <div class="card-header text-white">            <i class="fas fa-users"></i> DANH SÁCH TÀI KHO?N TOÀN C?U        </div>        <div class="card-body">            <textarea id="list-users" class="form-control form-control-dark" rows="5" readonly style="font-family: monospace; font-size: 0.9em;"></textarea>            <div class="text-end mt-2">                <button onclick="loadData()" class="btn btn-outline-light btn-sm"><i class="fas fa-sync"></i> Làm m?i</button>            </div>        </div>    </div>    <script>        let globalData = null;        const formatMoney = (n) => n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");        // --- 1. T?I D? LI?U & V? M?I TH? ---        async function loadData() {            document.getElementById('status').innerText = "Ðang t?i...";            document.getElementById('status').className = "text-warning";                        globalData = await getGlobalData();                        if(globalData) {                document.getElementById('status').innerText = "ONLINE";                document.getElementById('status').className = "fw-bold text-success";                // A. HI?N TH? L?NH ADMIN HI?N T?I                if(globalData.adminCommand && globalData.adminCommand.d1 > 0) {                    document.getElementById('current-cmd').innerText =                         `${globalData.adminCommand.d1} - ${globalData.adminCommand.d2} - ${globalData.adminCommand.d3}`;                    document.getElementById('current-cmd').className = "text-danger";                } else {                    document.getElementById('current-cmd').innerText = "Ng?u nhiên";                    document.getElementById('current-cmd').className = "text-success";                }                // B. V? BI?U Ð? (GRAPH) - QUAN TR?NG                drawAdminGraph(globalData.globalHistory);                // C. HI?N TH? DANH SÁCH CU?C LIVE                renderLiveBets(globalData.liveBets);                // D. HI?N TH? USER                renderUserList(globalData.users);            } else {                document.getElementById('status').innerText = "M?T K?T N?I";                document.getElementById('status').className = "fw-bold text-danger";            }        }        // --- 2. HÀM V? BI?U Ð? (COPY T? GAME SANG) ---        function drawAdminGraph(history) {            const container = document.getElementById('graph-container');            if (!history || history.length === 0) {                container.innerHTML = '<div class="text-center p-5 text-secondary">Chua có d? li?u c?u</div>';                return;            }            const data = history.slice(-20); // L?y 20 ván m?i nh?t            const w = 1200; // V? r?ng hon chút cho admin d? nhìn            const h = 400;             const pad = 40;            const stepX = (w - pad * 2) / 19;             const stepY = (h - pad * 2) / 15;             let svg = `<svg viewBox="0 0 ${w} ${h}" style="width:100%; height:100%">`;            // Lu?i ngang            for (let i = 3; i <= 18; i++) {                let y = h - pad - ((i - 3) * stepY);                svg += `<line x1="${pad}" y1="${y}" x2="${w - pad}" y2="${y}" stroke="#333" stroke-width="1" />`;                svg += `<text x="${pad - 10}" y="${y + 5}" fill="#666" font-size="14" text-anchor="end">${i}</text>`;            }            let points = "";            let dots = "";            data.forEach((d, i) => {                let x = pad + (i * stepX);                let y = h - pad - ((d.sum - 3) * stepY);                points += `${x},${y} `;                let dotClass = d.winner === 'tai' ? 'dot-tai' : 'dot-xiu';                dots += `<g class="${dotClass}" transform="translate(${x},${y})">                            <circle r="10"/>                            <text dy="4" text-anchor="middle">${d.sum}</text>                         </g>`;            });            svg += `<polyline points="${points}" fill="none" stroke="#ffd700" stroke-width="3" />`;            svg += dots;            svg += `</svg>`;            container.innerHTML = svg;        }        // --- 3. HI?N TH? DANH SÁCH CU?C ---        function renderLiveBets(bets) {            let totalTai = 0, totalXiu = 0;            let taiHTML = "", xiuHTML = "";            if(bets && bets.tai) {                bets.tai.forEach(b => {                    totalTai += b.m;                    taiHTML += `<li><span class="user-name">${b.u}</span> <span class="money-val">${formatMoney(b.m)}</span></li>`;                });            }            if(bets && bets.xiu) {                bets.xiu.forEach(b => {                    totalXiu += b.m;                    xiuHTML += `<li><span class="user-name">${b.u}</span> <span class="money-val">${formatMoney(b.m)}</span></li>`;                });            }            document.getElementById('list-tai').innerHTML = taiHTML || '<li class="text-center text-secondary">Tr?ng</li>';            document.getElementById('list-xiu').innerHTML = xiuHTML || '<li class="text-center text-secondary">Tr?ng</li>';            document.getElementById('total-tai').innerText = formatMoney(totalTai);            document.getElementById('total-xiu').innerText = formatMoney(totalXiu);        }        // --- 4. HI?N TH? USER ---        function renderUserList(users) {            let txt = "";            if(users) {                users.forEach(u => {                    txt += `User: ${u.username.padEnd(15)} | Pass: ${u.password.padEnd(10)} | SD: ${formatMoney(u.balance)}\n`;                });            }            document.getElementById('list-users').value = txt;        }        // --- 5. CH?C NANG N?P TI?N ---        async function addMoney() {            if(!globalData) await loadData();            let uName = document.getElementById('adm-user').value.trim();            let amt = parseInt(document.getElementById('adm-amt').value);            let user = globalData.users.find(x => x.username === uName);            if(user) {                user.balance += amt;                await saveGlobalData(globalData);                alert(`? Ðã c?ng ${formatMoney(amt)} cho ${uName}`);                loadData();            } else {                alert("? Không tìm th?y User này!");            }        }        // --- 6. CH?C NANG B? C?U ---        async function setDice() {            if(!globalData) await loadData();            let d1 = parseInt(document.getElementById('d1').value);            let d2 = parseInt(document.getElementById('d2').value);            let d3 = parseInt(document.getElementById('d3').value);            globalData.adminCommand = { d1, d2, d3 };                        // Khi b? c?u, nên reset danh sách cu?c cu d? chu?n b? cho ván m?i (tu? ch?n)            globalData.liveBets = { tai: [], xiu: [] };            await saveGlobalData(globalData);            alert(`? Ðã cài k?t qu? ván sau: ${d1} - ${d2} - ${d3}`);            loadData();        }        // T? d?ng c?p nh?t m?i 2 giây        setInterval(loadData, 2000);        loadData();    </script></body></html>